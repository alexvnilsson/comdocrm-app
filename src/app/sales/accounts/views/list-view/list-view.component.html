<toolbar>
    <toolbar-item (click)="onModalOpen.emit('modal_accounts_initialEditor')" icon="plus" text="Skapa"></toolbar-item>
    <toolbar-item link="/sales/accounts/import" icon="search" text="Importera"></toolbar-item>
</toolbar>

<ccrm-tabs>
    <ccrm-tabs-tab header="Alla kontakter">
        <div class="list-group" *ngIf="accounts && accounts.length > 0">
            <a 
                *ngFor="let account of accounts"
                [routerLink]="['/', 'sales', 'accounts', account.alias]"            
                class="list-group-item list-group-item-action flex-column align-items-start">
                <div class="d-flex flex-row flex-wrap w-100 justify-content-between">
                    <h6 class="mb-1">
                        {{ account.customer?.legalName || "Ok√§nt" }}
                    </h6>

                    <span class="text-muted">{{ account.dateModified | amCalendar }}</span>
                </div>

                <div class="d-flex flex-row justify-space-between">
                    <div class="small">
                        <span class="text-muted">Kundansvarig</span> {{ account.manager?.user?.fullName || "Inte tilldelad" }}
                    </div>
                </div>
            </a>
        </div>
    </ccrm-tabs-tab>

    <ccrm-tabs-tab header="Aktivitet">
        <div class="container pt-2">
            <ccrm-sales-accounts-list-view-all-statuses></ccrm-sales-accounts-list-view-all-statuses>
        </div>
    </ccrm-tabs-tab>
</ccrm-tabs>

<modal-container id="modal_accounts_initialEditor" [state]="modalOpen$">
    <ccrm-sales-accounts-details-initial-editor (onClosed)="onModalOpen.emit(null)"></ccrm-sales-accounts-details-initial-editor>
</modal-container>